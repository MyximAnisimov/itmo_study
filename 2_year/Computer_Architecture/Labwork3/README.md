Архитекутра компьютера - Лабораторная №3
======
Выполнил
---
Анисимов Максим Дмитриевич P3233

Вариант (упрощённый)
---
Базовый вариант: alg | risc | neum | hw | instr | binary | stream | mem | pstr | prob1 | cache

Вариант после упрощения: asm | risc | neum | hw | instr | struct | stream | mem | pstr | prob1 | cache

Синтаксис языка
---
Синтаксис в расширенной БНФ
* ```[...]``` - вхождение 0 или 1 раз
* ```{...}``` - вхождение 0 или несколько раз
* ```{...}```- - вхождение 1 или несколько раз

### Форма Бэкуса-Наура
```
program ::= { program_line }-

program_line ::= code_line [ comment ]

code_line ::=  data_label ":" 
        | insruction 
        | data

data ::= ".word" variable

variable ::= integer
       | string
       | label_name

instruction ::= op0 
       | op1 register 
       | op2 register "," register
       | op3 address
       | op4 register, address
       | op4 address, register

address ::= label_name | "(" label_name ")"

label_name ::= <any of "a-z A-Z"> { <any of "a-z A-Z 0-9 _ "> }

register ::= "r" <any of "0-3">

op0 ::= "nop" 
      | "hlt" 

op1 ::= "inc" 
      | "dec"

op2 ::= "add" 
      | "sub"
      | "mod"
      | "test"
      
op3 ::= "jg" 
      | "jng"
      | "jz" 
      | "jnz" 
      | "jmp"

op4 ::= "mov"

integer :: = [ "-" ] { <any of "0-9"> }-

positive_integer :: = { <any of "0-9"> }-

string ::= "\'" { <any of "a-z A-Z">}- "\'"

comment ::= ";" { <any symbol except "\n"> }
```
### Операции
#### op0 (Безадресные операции)
* ```nop``` - нет операции
* ```hlt``` - остановка работы программы
#### op1 (Адресные операции)
* ```inc { register }``` - операция инкрементации значения в регистре
* ```dec { register }``` - операция декрментации значения в регистре
#### op2 (Адресные операции)
Результаты сохраняются в первом регистре команды
* ```add { register register }``` - сложение первого и второго регистра
* ```sub { register register }``` - вычитание первого и второго регистра
* ```mod { register register }``` - нахождение остатка деления первого регистра на второй
* ```test {register register}``` - логическое умножение двух регистров
#### op3 (Операции ветвления)
* ```jg { label_name }``` - переход по адресу label_name, если флаг N = 0 (Результат вычислений положительный)
* ```jng { label_name }``` - переход по адресу label_name, если флаг N != 0 (Результат вычислений отрицательный)
* ```jz {label_name }``` - переход по адресу label_name если флаг Z = 0 (Результат вычислений равен 0)
* ```jnz { label_name }``` - переход на указанную метку если Z != 0 (Результат вычислений не равен 0)
* ```jmp { label_name }``` - безусловный переход по адресу
#### op4 (Адресная операция)
* ```mov { register, address }``` - загрузить значение из address в register
* ```mov { address, register }``` - загрузить значение из register в address
  
Организация памяти
---
* Архитектура фон-Неймана
* Машинное слово - не определено
* Данные имеют разрядность 32 бита
### Схема памяти
```
            memory
+----------------------------+
| 00:  start address (n)     |
| 01:  input port            |
| 02:  output str port       |
| 03:  output int port       |   
| 04:       ...
|      variables space       |
|           ...              |
| n:   program start         |
|           ...              |
+----------------------------+
```
* В ячейке 00 лежит адрес начала программы
* В ячейках 01, 02, 03 хранятся порты ввода-вывода
* В ячейках с 03 по n хранятся переменные, используемые в программе:
 - Целочисельные
 - Строковые
* Внутри процессора находятся регистры общего назначения r0-r3 (Что соответствует RISC-архитектуре), а также служебные регистры:
 - ```IP``` - счётчик
 - ```AR``` - регистр адреса
 - ```DR``` - регистр данных
 - ```PS``` - регистр состояния
### Адресация памяти
- Асболютная адресация
- Косвенная адресация

Модель процессора
---
### DataPath
